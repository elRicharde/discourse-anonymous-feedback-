<style>
  /* Wider + mobile friendly */
  .af-wrap {
    max-width: 1100px;
    margin: 1.5rem auto;
    padding: 0 1rem;
  }
  .af-input, .af-textarea {
    width: 100%;
    box-sizing: border-box;
  }
  .af-textarea {
    min-height: 10rem;
    resize: vertical;
  }
  .af-hidden {
    display: none !important;
  }
  .af-actions {
    margin-top: 0.75rem;
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }
</style>

<div class="af-wrap">
  <h1>{{this.title}}</h1>
  <p>{{this.intro}}</p>

  {{#if this.error}}
    <div class="alert alert-error">{{this.error}}</div>
  {{/if}}

  {{#if this.sent}}
    <div class="alert alert-success">{{i18n "js.anonymous_feedback.sent"}}</div>
  {{/if}}

  {{!-- Honeypot: must stay invisible for humans --}}
  <Input
    @value={{this.website}}
    class="af-hidden"
    @type="text"
    autocomplete="off"
    tabindex="-1"
  />

  {{#unless this.unlocked}}
    <div class="control-group">
      <label class="control-label">{{i18n "js.anonymous_feedback.doorcode_label"}}</label>
      <div class="controls">
        <Input
          @value={{this.doorCode}}
          @type="password"
          class="af-input"
          autocomplete="one-time-code"
        />
      </div>
    </div>

    <div class="af-actions">
      <button type="button" class="btn btn-primary" {{on "click" this.unlock}}>
        {{i18n "js.anonymous_feedback.btn_next"}}
      </button>
    </div>
  {{else}}
    <div class="control-group">
      <label class="control-label">{{i18n "js.anonymous_feedback.subject_label"}}</label>
      <div class="controls">
        <Input @value={{this.subject}} class="af-input" />
      </div>
    </div>

    <div class="control-group">
      <label class="control-label">{{i18n "js.anonymous_feedback.message_label"}}</label>
      <div class="controls">
        <Textarea @value={{this.message}} class="af-textarea" />
      </div>
    </div>

    <div class="af-actions">
      <button
        type="button"
        class="btn btn-primary"
        disabled={{this.sending}}
        {{on "click" this.send}}
      >
        {{#if this.sending}}
          {{i18n "js.anonymous_feedback.sending"}}
        {{else}}
          {{i18n "js.anonymous_feedback.btn_send"}}
        {{/if}}
      </button>
    </div>
  {{/unless}}
</div>
